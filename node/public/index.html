<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>NoBroko Bot</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#020617">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>

  <style>
    :root {
      --bg: #020617;
      --glass: rgba(255,255,255,0.06);
      --stroke: rgba(255,255,255,0.08);
      --card: rgba(31,41,55,.85);
      --primary: #22c55e;
      --text: #e5e7eb;
      --muted: #9ca3af;
    }

    * { box-sizing: border-box; margin:0; }

    body {
      background: black;
      font-family: -apple-system, BlinkMacSystemFont, Inter, system-ui, sans-serif;
      color: var(--text);
      overflow-x: hidden;
    }

    /* ===== LAYOUT WRAPPER ===== */
    .layout-wrapper {
      display: flex;
      min-height: 100vh;
      width: 100%;
    }

    /* ===== LEFT AI PANEL ===== */
    .ai-hero-panel {
      width: calc(100vw - 520px);
      min-height: 100vh;
      background: radial-gradient(circle at top, #0a1225, #020617 60%);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px;
      position: fixed;
      left: 0;
      top: 0;
    }

    .ai-hero-content {
      max-width: 520px;
      background: linear-gradient(180deg, rgba(31,41,55,.6), rgba(2,6,23,.8));
      border-radius: 28px;
      padding: 48px;
      border: 1px solid rgba(255,255,255,0.08);
      backdrop-filter: blur(40px);
      box-shadow: 0 30px 80px rgba(0,0,0,.8);
      animation: floatPanel 6s ease-in-out infinite;
    }

    .ai-hero-content h1 {
      font-size: 38px;
      font-weight: 700;
      letter-spacing: -0.5px;
      background: linear-gradient(90deg, #22c55e, #a7f3d0);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .ai-sub {
      margin-top: 14px;
      font-size: 16px;
      color: #9ca3af;
      line-height: 1.6;
    }

    .ai-features {
      list-style: none;
      margin-top: 28px;
      padding: 0;
    }

    .ai-features li {
      margin-bottom: 12px;
      font-size: 15px;
      color: #e5e7eb;
      opacity: 0.9;
    }

    .ai-live-line {
      margin-top: 30px;
      font-size: 14px;
      color: #22c55e;
      font-family: monospace;
    }

    .cursor {
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0%,50%,100% { opacity: 1; }
      25%,75% { opacity: 0; }
    }

    @keyframes floatPanel {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
      100% { transform: translateY(0px); }
    }

    /* ===== APP ===== */
    .app {
      width: 420px;
      max-width: 100%;
      height: 100vh;
      background: linear-gradient(180deg, #020617 0%, #020617 100%);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      border-radius: 28px;
      box-shadow: 0 30px 80px rgba(0,0,0,.8);
      margin-left: auto;
      margin-right: 40px;
      margin-top: 24px;
      margin-bottom: 24px;
      z-index: 2;
      position: relative;
    }

    /* ===== MOBILE ===== */
    @media (max-width: 1023px) {
      .ai-hero-panel {
        display: none;
      }

      .app {
        width: 100%;
        height: 100vh;
        margin: 0;
        border-radius: 0;
        box-shadow: none;
      }
    }

    header {
      background: rgba(2,6,23,.85);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--stroke);
      padding: 12px 16px 10px;
      flex-shrink: 0;
    }

    .header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .header-center {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      letter-spacing: .3px;
    }

    .header-icons {
      display: flex;
      gap: 14px;
    }

    .market-status {
      font-size: 12px;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 6px;
      margin-top: 4px;
    }

    #chat-container { flex:1; display:flex; flex-direction:column; overflow:hidden; }

    .ScrollStyle {
      flex: 1;
      overflow-y: auto;
      padding: 12px;
      scrollbar-width: none;
      scroll-behavior: smooth;
    }

    #messages { display:flex; flex-direction:column; gap:10px;}

    .user-msg, .bot-msg { display:flex; flex-direction:column; }
    .user-msg { align-items:flex-end; }
    .bot-msg { align-items:flex-start; }

    .msg-content {
      max-width:100%;
      padding:12px 16px;
      border-radius:18px;
      font-size:15px;
      word-wrap:break-word;
      background: var(--card);
      color: var(--text);
    }

    .user-msg .msg-content {
      background: var(--primary);
      color: #022c22;
    }

    #chat-form {
      width:100%;
      padding:10px 16px;
      display:flex;
      gap:8px;
      background: rgba(2,6,23,.85);
      backdrop-filter: blur(20px);
      border-top: 1px solid var(--stroke);
      z-index:20;
    }

    #message-input {
      flex:1;
      padding:12px 16px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background: rgba(31,41,55,.6);
      color: var(--text);
      font-size:15px;
    }

    #chat-form button {
      width:48px;
      height:48px;
      border-radius:50%;
      background: linear-gradient(180deg, #22c55e, #16a34a);
      border:none;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
    }
  </style>
</head>

<body>

<div class="layout-wrapper">

  <!-- LEFT AI PANEL -->
  <div class="ai-hero-panel">
    <div class="ai-hero-content">
      <h1>Trade Smarter with AI</h1>
      <p class="ai-sub">
        Real-time market intelligence.<br>
        Emotion-free decisions.<br>
        Built for serious traders.
      </p>

      <ul class="ai-features">
        <li>üìä Live sentiment tracking</li>
        <li>‚ö° Smart entry & exit zones</li>
        <li>üß† AI confidence scoring</li>
        <li>üõ° Risk-aware strategies</li>
        <li>üîÅ Backtesting engine</li>
      </ul>

      <div class="ai-live-line">
        <span id="ai-typing"></span>
        <span class="cursor">|</span>
      </div>
    </div>
  </div>

  <!-- APP -->
  <div class="app">

    <!-- SIGNUP SCREEN -->
    <section id="signup-screen" style="display:none;">
      <h2 style="color:white; text-align:center;">Welcome to NoBroko Bot</h2>
      <form id="signup-form" style="display:flex; flex-direction:column; gap:12px; padding:20px;">
        <input type="text" id="name" placeholder="Name" required style="padding:10px; border-radius:8px; border:none;">
        <input type="text" id="phone" placeholder="Phone (+91xxxxxxx)" required style="padding:10px; border-radius:8px; border:none;">
        <input type="email" id="email" placeholder="Email" required style="padding:10px; border-radius:8px; border:none;">
        <label style="color:white;"><input type="checkbox" id="subscribe" checked> Subscribe to alerts</label>
        <button type="button" id="signin-btn" style="padding:12px; border:none; border-radius:8px; background:#22c55e; color:#000; width:100%;">Sign In</button>
        <button type="button" id="signup-btn" style="padding:12px; border:none; border-radius:8px; background:#22c55e; color:#000; width:100%;">Sign Up</button>
      </form>
    </section>

    <!-- CHAT SCREEN -->
    <section id="chat-screen" style="display:block;">
      <header>
        <div class="header-top">
          <button id="back-btn" style="background:none; border:none; cursor:pointer;">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
          </button>

          <div class="header-center">
            <span>üìà</span>
            <span>NoBroko Bot</span>
          </div>

          <div class="header-icons">
            <button id="alerts-btn" style="background:none; border:none; cursor:pointer;">
              <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 8a6 6 0 00-12 0c0 7-3 9-3 9h18s-3-2-3-9"></path>
                <path d="M13.73 21a2 2 0 01-3.46 0"></path>
              </svg>
            </button>
          </div>
        </div>

        <div class="market-status" id="market-status">
          <svg width="10" height="10">
            <circle cx="5" cy="5" r="5" fill="#22c55e" id="market-circle"/>
          </svg>
          <span id="market-text">Market Open</span>
        </div>
      </header>

      <section id="sentiment-cards"></section>

      <section id="chat-container">
        <div id="messages" class="ScrollStyle"></div>

        <form id="chat-form">
          <input id="message-input" placeholder="Ask about a stock‚Ä¶" autocomplete="off">
          <button type="submit">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#022c22" stroke-width="2">
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
        </form>
      </section>
    </section>

  </div>
</div>

<script src="app.js?v=85"></script>

<script>
  const phrases = [
    "Analyzing 2,184 stocks in real time...",
    "Scanning momentum shifts...",
    "Tracking smart money flow...",
    "Detecting breakout patterns...",
    "Monitoring sentiment spikes..."
  ];

  let i = 0, j = 0, current = "", deleting = false;
  const el = document.getElementById("ai-typing");

  function typeLoop() {
    if (!el) return;

    if (!deleting && j <= phrases[i].length) {
      current = phrases[i].slice(0, j++);
    } else if (deleting && j >= 0) {
      current = phrases[i].slice(0, j--);
    }

    el.textContent = current;

    if (j === phrases[i].length + 10) deleting = true;
    if (deleting && j === 0) {
      deleting = false;
      i = (i + 1) % phrases.length;
    }

    setTimeout(typeLoop, deleting ? 40 : 70);
  }

  typeLoop();

  function adjustChatHeight() {
    const headerHeight = document.querySelector('header').offsetHeight;
    const windowHeight = window.innerHeight;
    const cardsEl = document.getElementById('sentiment-cards');
    const cardsHeight = cardsEl ? cardsEl.offsetHeight : 0;
    const maxheight = `${windowHeight - headerHeight - cardsHeight - document.getElementById('chat-form').offsetHeight - 40}px`;
    document.querySelector('.ScrollStyle').style.maxHeight = maxheight;
  }

  window.addEventListener('load', adjustChatHeight);
  window.addEventListener('resize', adjustChatHeight);
</script>

</body>
</html>
